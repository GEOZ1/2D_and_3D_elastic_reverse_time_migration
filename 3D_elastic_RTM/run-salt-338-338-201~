#! /bin/sh
mkdir someoutput shotgather result ./result/program
rm 3D_elastic_modeling_gpu 3D_elastic_modeling.o
cp -r   run* 3D* zzzz* ./result/program
mv log.txt    log_old.txt                                                            
											     GPU_N=3      exchange_device_bool=1

make
			./3D_elastic_modeling_gpu   RTM=1	GPU_switch=1  GPU_start=0  GPU_N=$GPU_N exchange_device_bool=$exchange_device_bool\
\
			velocity=../.././velocity/salt-vp-338-338-201    velocity1=../.././velocity/salt-vs-338-338-201    density=../.././velocity/salt-den-338-338-201\
			s_velocity=../.././velocity/vp-201-201-201  s_velocity1=../.././velocity/vs-201-201-201  s_density=../.././velocity/den-201-201-201\
			smooth_time_vp=30 smooth_time_vs=30 smooth_time_density=30 velocity_multiple=1.0\
\
			join_vs=0 join_den=0 join_shot=0 infile_shot_name=./shotgather/obs cut_direct_wave=200 join_wavefield=0 wavefield_interval=400\
\
			laplace=1 laplace_compensate=1 vsp=0 vsp_precon=0  precon=1 precon_z1=0 precon_z2=11 add_receiver_bool=1\
\
			nx=338 ny=338 nz=201 dx=10 dy=10 dz=10 lt=4000 dt=0.8 freq=15\
\
			shot_num_x=17 shot_start_x=4 shot_interval_x=20\
			shot_num_y=4 shot_start_y=4 shot_interval_y=20\
			shot_num_z=1  shot_start_z=0 shot_interval_z=0\
\
			receiver_num_x=338 receiver_start_x=0 receiver_interval_x=1\
			receiver_num_y=338 receiver_start_y=0 receiver_interval_y=1\
			receiver_num_z=0 receiver_start_z=0 receiver_interval_z=0\
			receiver_offset=150 receiver_mark=0\
\
			boundary_up=20 boundary_down=20 boundary_left=20 boundary_right=20 boundary_front=20 boundary_back=20 coe_attenuation=200

			mv log.txt log_$GPU_N$exchange_device_bool.txt
			#mv wavefield wavefield_$GPU_N$exchange_device_bool
###exchange_device_bool:   ==0: set gpu0 to exchange wf1 and wf 2;           ==1: set gpu0 to exchange only wf1;///////////GPU_N=0,1,2,3,4,5,6 available bool:0,1,2,3;
###exchange_device_bool:   ==2: set gpu0-gpuN to exchange wf1 and wf 2;      ==3: set gpu0-gpuN to exchange only wf1;//////GPU_N=0,1,2,3,5     available bool:2,3;
###join_shot=0:must simulate obs_shot_x and obs_shot_z  (seismic recordings)
###join_shot=1:alredy has    obs_shot_x and obs_shot_z  (seismic recordings)
###precon=0:no precondition;precon==1:source illumination;precon=2:come from Multi-paramerter FWI; note:in 1.cu, modify:precon_z1-precon_z2 in precondition
###join_vs=0 join_den=0:
